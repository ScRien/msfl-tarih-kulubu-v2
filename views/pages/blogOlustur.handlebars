<section class="blog-add-section">
  <div class="blog-add-form">
    <h1 class="blog-add-title">Kendi Tarihini Yaz!</h1>

    <form id="blogForm" method="POST" action="/blog/olustur">
      <input type="hidden" name="_csrf" value="{{csrfToken}}" />

      <div class="form-top">
        <input
          type="text"
          name="title"
          placeholder="Blog Başlığı"
          class="input-field"
          required
        />

        <span class="img-hint">
          Önerilen boyut: 1600×900 • Maks. 5 görsel • Her biri en fazla 5 MB
          <br />
          <strong>Tüm görselleri tek seferde seçiniz.</strong>
        </span>

        <div class="upload-wrapper">
          <button
            type="button"
            class="upload-label"
            id="openImagePicker"
          >
            Görsel Yükle
          </button>

          <input
            type="file"
            id="blogImages"
            class="file-input"
            accept="image/*"
            multiple
          />

          <span id="fileCount" class="file-count">
            Seçili dosya yok
          </span>
        </div>
      </div>

      <!-- ✅ Önizleme -->
      <div id="previewBox" class="preview-container"></div>

      <textarea
        name="content"
        class="textarea-field"
        rows="8"
        placeholder="Blog içeriğini buraya yaz..."
        required
      ></textarea>

      <div class="warning-box">
        <strong>Uyarı:</strong>
        Yanıltıcı tarih bilgileri ve telif ihlali içeren içerikler paylaşmayınız.
      </div>

      <!-- ✅ ImageKit çıktısı: [{ url, fileId }] -->
      <input
        type="hidden"
        id="imageUrls"
        name="imageUrls"
        value="[]"
      />

      <button type="submit" class="submit-btn">
        Blogu Oluştur
      </button>
    </form>
  </div>

  <!-- ✅ Upload Loader -->
  <div
    id="blogUploadLoading"
    class="blog-upload-loader"
    style="display:none;"
  >
    <div class="blog-loader-box">
      <div class="blog-spinner"></div>
      <span>Görseller yükleniyor...</span>
    </div>
  </div>
</section>

<!-- ✅ TEK uploadClient -->
<script type="module" src="/js/uploadClient.js"></script>
<script type="module" src="/js/blogUpload.js"></script>
