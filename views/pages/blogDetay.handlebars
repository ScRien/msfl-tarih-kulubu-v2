<section class="blog-detail">

  <!-- HERO -->
  <div class="blog-detail-hero">
    <img
      class="blog-detail-cover"
      src="{{#if post.images.[0]}}{{post.images.[0]}}{{else}}/img/default-blog.jpg{{/if}}"
      alt="{{post.title}}"
    />
    <div class="blog-detail-overlay"></div>

    <div class="blog-detail-title-wrapper">
      <p class="blog-detail-badge">MSFL TARİH KULÜBÜ</p>

      <h1 class="blog-detail-title">{{post.title}}</h1>

      <div class="blog-detail-meta">
        <a href="/u/@{{post.username}}" class="blog-detail-author">
          @{{post.username}}
        </a>
        <span class="blog-detail-dot">•</span>
        <span class="blog-detail-date">{{generateDate post.date "DD MMMM YYYY"}}</span>
      </div>
    </div>
  </div>

  <!-- BODY -->
  <div class="blog-detail-body">

    <!-- CONTENT -->
    <article class="blog-detail-article">

      <div class="blog-detail-content">
        {{{formatParagraphs post.content}}}
      </div>

      {{#if (gt (length post.images) 1)}}
      <div class="blog-detail-gallery">
        {{#each post.images}}
        {{#unless @first}}
        <img src="{{this}}" alt="Blog görseli" />
        {{/unless}}
        {{/each}}
      </div>
      {{/if}}

    </article>

    <!-- COMMENTS -->
    <aside class="blog-detail-comments">
      <h2 class="comments-title">Yorumlar</h2>

      {{#if isAuth}}
      <form method="POST" action="/blog/{{post._id}}/yorum" class="comment-form">
        <input type="hidden" name="_csrf" value="{{csrfToken}}" />
        <textarea name="content" placeholder="Düşüncelerini bizimle paylaş..." required></textarea>
        <button type="submit" class="comment-btn">Gönder</button>
      </form>
      {{else}}
      <p class="comment-login-info">
        Yorum yapmak için
        <a href="/oturumAc">oturum aç</a>
        veya
        <a href="/kayitOl">kayıt ol</a>.
      </p>
      {{/if}}

      {{#if comments.length}}
      <ul class="comment-list">
        {{#each comments}}
        <li class="comment-item">

          <div class="comment-header">
            <a href="/u/@{{this.username}}" class="comment-author">
              @{{this.username}}
            </a>
            <span class="comment-date">{{generateDate this.date "DD.MM.YYYY"}}</span>
          </div>

          <p class="comment-content">
            {{this.content}}
          </p>

        </li>
        {{/each}}
      </ul>
      {{else}}
      <p class="no-comments">Henüz yorum yok.</p>
      {{/if}}
    </aside>

  </div>
</section>
