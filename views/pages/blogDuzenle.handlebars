<section class="blog-edit-section">

  <h1 class="blog-edit-title">Blogu Düzenle</h1>
  <p class="blog-edit-desc">Başlık, içerik ve görselleri güncelleyebilirsin.</p>

  {{#if error}}
    <div class="blog-alert error">{{error}}</div>
  {{/if}}

  {{#if success}}
    <div class="blog-alert success">{{success}}</div>
  {{/if}}

  <form id="blogEditForm" method="POST" action="/blog/duzenle/{{post._id}}">

    <input type="hidden" name="_csrf" value="{{csrfToken}}" />

    <!-- BAŞLIK -->
    <div class="form-group">
      <label>Başlık</label>
      <input
        type="text"
        name="title"
        class="input-field"
        value="{{post.title}}"
        required
      />
    </div>

    <!-- İÇERİK -->
    <div class="form-group">
      <label>İçerik</label>
      <textarea
        name="content"
        rows="8"
        class="input-field"
        required
      >{{post.content}}</textarea>
    </div>

    <!-- MEVCUT GÖRSELLER -->
    <div class="form-group">
      <label>Mevcut Fotoğraflar</label>

      <div class="existing-images">
        {{#each post.images}}
          <div class="image-box">
            <img src="{{this}}" alt="Blog Görseli" />

            <label class="delete-img">
              <input type="checkbox" name="deleteImages" value="{{this}}" />
              Sil
            </label>
          </div>
        {{/each}}
      </div>
    </div>

    <!-- YENİ FOTOĞRAF YÜKLE -->
    <div class="form-group">
      <label>Yeni Fotoğraflar (En fazla 5)</label>

      <label for="editImages" class="upload-btn">Fotoğraf Seç</label>
      <input
        type="file"
        id="editImages"
        accept="image/*"
        multiple
        class="hidden-input"
      />

      <div id="editPreviewContainer" class="preview-container"></div>

      <!-- Cloudinary geçişli upload için: -->
      <input type="hidden" name="uploadedImages" id="uploadedImages" />
    </div>

    <div class="form-buttons">
      <button type="submit" class="save-btn">Güncelle</button>
      <a href="/blog/{{post._id}}" class="cancel-btn">İptal</a>
    </div>
  </form>
</section>

<script src="/js/blogEdit.js"></script>