<section class="blog-edit">

  <h1 class="edit-title">Blog Düzenle</h1>

  <form id="blogEditForm" method="POST" action="/blog/duzenle/{{post._id}}">
    <input type="hidden" name="_csrf" value="{{csrfToken}}" />
    <input type="hidden" id="deleteImages" name="deleteImages" value="[]" />
    <input type="hidden" id="newImagesJson" name="newImagesJson" value="[]" />

    <!-- Başlık -->
    <div class="form-group">
      <label>Başlık</label>
      <input type="text" name="title" value="{{post.title}}" required />
    </div>

    <!-- İçerik -->
    <div class="form-group">
      <label>İçerik</label>
      <textarea name="content" rows="10" required>{{post.content}}</textarea>
    </div>

    <!-- Mevcut Fotoğraflar -->
    <div class="edit-gallery">
      <p class="gallery-title">Mevcut Fotoğraflar</p>

      {{#if post.images.length}}
        <div class="gallery-grid">
          {{#each post.images}}
            <div class="gallery-item">
              <img src="{{this.url}}" alt="Görsel" />
              <label class="remove-label">
                <input
                  type="checkbox"
                  class="deleteImageCheck"
                  value="{{this.public_id}}"
                />
                Sil
              </label>
            </div>
          {{/each}}
        </div>
      {{else}}
        <p class="no-images">Bu blog için henüz görsel eklenmemiş.</p>
      {{/if}}
    </div>

    <!-- Yeni Fotoğraf Ekle -->
    <div class="form-group">
      <label>Yeni Fotoğraf Ekle (Max 5)</label>
      <span class="img-hint">En uygun boyut: 1600×900 • Max 2 MB</span>
      <input type="file" id="newImages" accept="image/*" multiple />
      <div id="editPreviewBox" class="preview-area"></div>
    </div>

    <button class="btn save">Güncelle</button>
  </form>

  <div id="blogEditLoading" class="blog-upload-loader" style="display:none;">
    <div class="blog-loader-box">
      <div class="blog-spinner"></div>
      <span>Görseller yükleniyor...</span>
    </div>
  </div>

</section>

<script src="/js/blogEditUpload.js"></script>
<script src="/js/blogForm.js"></script>