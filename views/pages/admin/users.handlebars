<div class="admin-search-bar">
  <h1>KullanÄ±cÄ± YÃ¶netimi</h1>

  <form action="/admin/kullanicilar" method="GET" class="admin-filter-bar">

    <!-- ðŸ” Genel arama -->
    <input
      type="text"
      name="q"
      placeholder="KullanÄ±cÄ± adÄ±, ad-soyad veya e-posta ara..."
      class="search-input"
      value="{{query.q}}"
    />

    <!-- ðŸŽ­ Rol filtresi -->
    <select name="role">
      <option value="">TÃ¼m Roller</option>
      <option value="admin" {{#if (eq query.role "admin")}}selected{{/if}}>Admin</option>
      <option value="user" {{#if (eq query.role "user")}}selected{{/if}}>Ãœye</option>
    </select>

    <!-- ðŸ“… KayÄ±t zamanÄ± -->
    <select name="period">
      <option value="">TÃ¼m Zamanlar</option>
      <option value="7"  {{#if (eq query.period "7")}}selected{{/if}}>Son 7 gÃ¼n</option>
      <option value="30" {{#if (eq query.period "30")}}selected{{/if}}>Son 30 gÃ¼n</option>
      <option value="90" {{#if (eq query.period "90")}}selected{{/if}}>Son 90 gÃ¼n</option>
    </select>

    <!-- ðŸ”ƒ SÄ±ralama -->
    <select name="sort">
      <option value="new" {{#if (eq query.sort "new")}}selected{{/if}}>En Yeni</option>
      <option value="old" {{#if (eq query.sort "old")}}selected{{/if}}>En Eski</option>
      <option value="name" {{#if (eq query.sort "name")}}selected{{/if}}>Ada gÃ¶re (Aâ€“Z)</option>
    </select>

    <button type="submit" class="admin-btn">
      Filtrele
    </button>

    {{#if query.q}}
      <a href="/admin/kullanicilar" class="admin-btn ghost">Temizle</a>
    {{/if}}

  </form>
</div>

<div class="table-container">
  <p style="margin-top:10px; margin-bottom:20px; font-size:14px; color:#555;">
    {{users.length}} kayÄ±t bulundu
  </p>
  
  <table class="admin-table">
    <thead>
      <tr>
        <th width="50">GÃ¶rsel</th>
        <th>KullanÄ±cÄ± AdÄ±</th>
        <th>Ad Soyad</th>
        <th>E-posta</th>
        <th>Rol</th>
        <th>Ä°ÅŸlemler</th>
      </tr>
    </thead>
    <tbody>
      {{#each users}}
      <tr>
        <td>
          <img src="{{#if this.avatar.url}}{{this.avatar.url}}{{else}}/img/default-avatar.png{{/if}}" class="table-img">
        </td>
        <td>{{this.username}}</td>
        <td>{{this.name}} {{this.surname}}</td>
        <td>{{this.email}}</td>
        <td>
          {{#if (eq this.role "admin")}}
            <span style="color:red; font-weight:bold;">Admin</span>
          {{else}}
            <span style="color:green;">Ãœye</span>
          {{/if}}
        </td>
        <td>
          <a href="/admin/kullanici/{{this._id}}" class="action-btn btn-view">
            <i class="fa-solid fa-eye"></i> Detay
          </a>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
</div>